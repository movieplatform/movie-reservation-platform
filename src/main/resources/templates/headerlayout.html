<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title layout:title-pattern="$CONTENT_TITLE - Movie Score">Movie Score</title>
    <link rel="stylesheet" th:href="@{/css/header.css}">
</head>
<body>
<header class="header">
    <div class="header-top">
        <div class="user-auth">
            <!-- 로그인 안했을 때 -->
            <span sec:authorize="isAnonymous()">
                <a href="/login">로그인</a> | <a href="/register">회원가입</a>
            </span>

            <!-- 로그인 했을 때 -->
            <div sec:authorize="isAuthenticated()" class="user-auth-logged-in">
                <form th:action="@{/logout}" method="post" style="display:inline;">
                    <button type="submit" class="logout-btn">로그아웃</button>
                </form>
                | <a th:href="@{/my-page}">마이페이지</a>

                <!-- 관리자일 때 -->
                <a th:if="${#authorization.expression('hasRole(''ADMIN'')')}" th:href="@{/admin}">관리자 페이지</a>
            </div>
        </div>
    </div>
    <div class="header-main">
        <nav class="left-nav">
            <button onclick="toggleSearch()" class="search-btn" aria-label="검색">
                <!-- 돋보기 SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zm-5.242.656a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
                </svg>
            </button>
            <a href="/movies">영화</a>
            <a href="/reservation">예매</a>
        </nav>
        <div class="logo">
            <a href="/">
                <img src="/images/logo.png" alt="로고 이미지">
            </a>
        </div>
        <nav class="right-nav">
            <a href="#">버튼 4</a>
            <a href="#">버튼 5</a>
            <a href="/my-page" class="mypage-btn">마이페이지</a>
        </nav>
    </div>
    <div id="search-container" style="display: none;">
        <input type="text" placeholder="검색어를 입력하세요.">
        <button>검색</button>
    </div>
</header>

<main layout:fragment="content">
    <!-- 자식 페이지에서 내용이 들어올 자리 -->
</main>

<footer>
</footer>
</body>
</html>
